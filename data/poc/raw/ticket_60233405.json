{
  "payload": {
    "ticket": {
      "metadata": {
        "product": "aurea_kerio_connect",
        "requester": {
          "id": 60175323,
          "uuid": "8d7293a7-a239-48fa-a4d6-56f36ac4c1e3",
          "full_name": "Thierry Almy",
          "legacy_id": "7550106556434",
          "designation": null,
          "is_enabled": true,
          "is_mfa_enabled": false,
          "role": {
            "id": 4,
            "resource_type": "role"
          },
          "avatar": "https://central-supportdesk.kayako.com/avatar/get/8d7293a7-a239-48fa-a4d6-56f36ac4c1e3?1765468275",
          "agent_case_access": null,
          "organization_case_access": "ORGANIZATION",
          "organization": {
            "id": 60046871,
            "resource_type": "organization"
          },
          "teams": [],
          "emails": [
            {
              "id": 176858,
              "resource_type": "identity_email"
            }
          ],
          "phones": [
            {
              "id": 48663,
              "resource_type": "identity_phone"
            }
          ],
          "twitter": [],
          "facebook": [],
          "external_identifiers": [],
          "custom_fields": [
            {
              "field": {
                "id": 1,
                "resource_type": "user_field"
              },
              "value": "",
              "resource_type": "user_field_value"
            },
            {
              "field": {
                "id": 2,
                "resource_type": "user_field"
              },
              "value": "",
              "resource_type": "user_field_value"
            }
          ],
          "pinned_notes_count": 0,
          "locale": {
            "id": 3,
            "resource_type": "locale"
          },
          "time_zone": "Europe/Istanbul",
          "time_zone_offset": 10800,
          "greeting": null,
          "signature": null,
          "status_message": null,
          "last_seen_user_agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.6 Safari/605.1.15",
          "last_seen_ip": "87.245.122.234",
          "last_seen_at": "2025-12-10T15:24:19+00:00",
          "last_active_at": "2025-12-11T15:51:15+00:00",
          "realtime_channel": "presence-9813ca639d37d1518f54b0c65e3b4bef061d5c9eb084715329b7324d129bf437@v1_users_60175323",
          "presence_channel": "user_presence-9813ca639d37d1518f54b0c65e3b4bef061d5c9eb084715329b7324d129bf437@1abca76d480eaf217012f7d918d4628295dd670d",
          "password_updated_at": "2025-04-23T11:19:08+00:00",
          "avatar_updated_at": null,
          "last_logged_in_at": "2025-12-10T15:24:19+00:00",
          "last_activity_at": "2025-12-10T15:24:19+00:00",
          "created_at": "2022-09-09T07:24:02+00:00",
          "updated_at": "2025-12-11T15:51:15+00:00",
          "resource_type": "user",
          "resource_url": "https://central-supportdesk.kayako.com/api/v1/users/60175323"
        },
        "ticket_idt": 60233405
      },
      "interactions": [
        [
          "2025-10-31T14:37:09+00:00",
          "Kayako - ticket id 60233405 // ATLAS commented publicly: Thanks for chatting earlier with our AI Support!<br><br>Here is a record of your conversation for easy reference: <br><br><b>--- Customer (Thierry Almy) ---</b><br>I can't add users from a different domain to a group, the functionality isn't there!<br/><br><br><b>--- AI Assistant ---</b><br>Ah, you're absolutely right! I apologize for the confusion. <strong>Kerio Connect groups are domain-specific</strong> - you can't add users from different domains to a single group. That's an important limitation I should have caught earlier. \ud83d\ude05<br><br><hr><br><br>## <strong>Revised Solutions for Multi-Domain Announcements:</strong><br><br>### <strong>Option 1: Export All Users & Send via BCC (Fastest for Now)</strong><br><br>Since you need to send this maintenance notification soon, this is your quickest path:<br><br><strong>Step 1: Get all user email addresses</strong><br><br>You have a few ways to do this:<br><br><strong>A) Via Kerio Admin Console:</strong><br>- Go to <strong>Accounts</strong> \u2192 <strong>Users</strong><br>- Manually switch through each domain and copy email addresses<br><br><strong>B) Via Command Line (Much Faster):</strong><br><br>Depending on your OS, you can extract all email addresses from Kerio's configuration:<br><br><strong>Linux:</strong><br>```bash<br>cd /opt/kerio/mailserver/store<br>grep -r \"<loginName>\" . | grep -oP '(?<=<loginName>).*?(?=</loginName>)' | sort -u > all_users_emails.txt<br>```<br><br><strong>Windows (PowerShell):</strong><br>```powershell<br>cd \"C:\\Program Files\\Kerio\\MailServer\\store\"<br>Select-String -Path \".\\*\\*\\config.fld\" -Pattern \"<loginName>(.*?)</loginName>\" | ForEach-Object { $_.Matches.Groups[1].Value } | Sort-Object -Unique > all_users_emails.txt<br>```<br><br>This will create a text file with all user email addresses across all domains.<br><br><strong>Step 2: Send the announcement</strong><br>- Open your email client<br>- Compose your maintenance notification<br>- Paste all email addresses into the <strong>BCC field</strong><br>- Send to yourself (To: field) with everyone else in BCC<br><br><hr><br><br>### <strong>Option 2: Create a Group Per Domain (For Future Use)</strong><br><br>For future announcements, you could:<br>1. Create an \"all-users\" group in <strong>each domain</strong><br>2. Add all users from that domain to their respective group<br>3. When you need to announce something, send to: `all-users@domain1.com, all-users@domain2.com, all-users@domain3.com...`<br><br><strong>This is tedious with 50+ domains</strong>, but it's a one-time setup that makes future announcements easier.<br><br><hr><br><br>### <strong>Option 3: Use Kerio Connect API Script (Most Elegant)</strong><br><br>Since Kerio's UI doesn't support cross-domain messaging well, the API is actually the best tool for this. I can provide you with a ready-to-use script.<br><br><strong>What's your server OS?</strong><br>- Linux<br>- Windows  <br>- macOS<br><br>I'll give you a simple script that:<br>1. Connects to Kerio's API<br>2. Retrieves all users from all domains<br>3. Sends your maintenance message to everyone<br><br>This would take about 5 minutes to set up and run.<br><br><hr><br><br>### <strong>Option 4: Third-Party Email Tool</strong><br><br>You could also:<br>1. Export all user emails (using the command-line method above)<br>2. Use an external email tool or service to send the announcement<br>3. Configure it to use your Kerio server as the SMTP relay<br><br><hr><br><br>## <strong>My Recommendation for Right Now:</strong><br><br><strong>Use Option 1</strong> (export via command line + BCC email) for this immediate maintenance notification. It's the fastest solution that doesn't require complex setup.<br><br><strong>For the future</strong>, consider either:<br>- Setting up per-domain groups (Option 2), OR<br>- Using an API script (Option 3) for easy multi-domain announcements<br><br><hr><br><br><strong>What's your server OS?</strong> I can give you the exact command to quickly extract all user emails so you can send your maintenance notification today. \ud83d\udda5\ufe0f<br/><br><br><b>--- Customer (Thierry Almy) ---</b><br>Option 3 for macOS would be nice<br/><br><br><b>--- AI Assistant ---</b><br>Perfect! Let me provide you with a ready-to-use script for macOS that will send your maintenance notification to all users across all domains via the Kerio Connect API. \ud83c\udf4e<br><br><hr><br><br>## <strong>Kerio Connect API Mass Email Script for macOS</strong><br><br>### <strong>Step 1: Create the Script</strong><br><br>Open <strong>Terminal</strong> and create a new Python script:<br><br>```bash<br>nano ~/send_kerio_announcement.py<br>```<br><br>### <strong>Step 2: Paste This Script</strong><br><br>```python<br>#!/usr/bin/env python3<br>import json<br>import requests<br>import getpass<br><br># Configuration<br>KERIO_SERVER = input(\"Enter Kerio Connect server address (e.g., mail.yourdomain.com): \")<br>ADMIN_USER = input(\"Enter admin username (e.g., admin@yourdomain.com): \")<br>ADMIN_PASS = getpass.getpass(\"Enter admin password: \")<br><br># Email content<br>print(\"\\n--- Compose Your Announcement ---\")<br>EMAIL_SUBJECT = input(\"Email Subject: \")<br>print(\"Email Body (press Enter, then Ctrl+D when done):\")<br>EMAIL_BODY = []<br>try:<br>    while True:<br>        line = input()<br>        EMAIL_BODY.append(line)<br>except EOFError:<br>    pass<br>EMAIL_BODY = \"\\n\".join(EMAIL_BODY)<br><br># API endpoint<br>API_URL = f\"https://{KERIO_SERVER}:4040/admin/api/jsonrpc/\"<br><br># Create session<br>session = requests.Session()<br>session.verify = False  # Disable SSL verification (use with caution)<br><br># Disable SSL warnings<br>import urllib3<br>urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)<br><br>def api_call(method, params=None):<br>    \"\"\"Make a JSON-RPC call to Kerio API\"\"\"<br>    payload = {<br>        \"jsonrpc\": \"2.0\",<br>        \"id\": 1,<br>        \"method\": method,<br>        \"params\": params or {}<br>    }<br>    response = session.post(API_URL, json=payload)<br>    return response.json()<br><br># Login<br>print(\"\\n[1/4] Logging in to Kerio Connect API...\")<br>login_response = api_call(\"Session.login\", {<br>    \"userName\": ADMIN_USER,<br>    \"password\": ADMIN_PASS,<br>    \"application\": {<br>        \"name\": \"Mass Email Script\",<br>        \"vendor\": \"Admin\",<br>        \"version\": \"1.0\"<br>    }<br>})<br><br>if \"error\" in login_response:<br>    print(f\"\u274c Login failed: {login_response['error']['message']}\")<br>    exit(1)<br><br>token = login_response[\"result\"][\"token\"]<br>print(\"\u2705 Login successful!\")<br><br># Get all users<br>print(\"\\n[2/4] Retrieving all users from all domains...\")<br>users_response = api_call(\"Users.get\", {<br>    \"query\": {<br>        \"fields\": [\"emailAddresses\"],<br>        \"conditions\": []<br>    }<br>})<br><br>if \"error\" in users_response:<br>    print(f\"\u274c Failed to get users: {users_response['error']['message']}\")<br>    exit(1)<br><br># Extract email addresses<br>all_emails = []<br>for user in users_response[\"result\"][\"list\"]:<br>    if \"emailAddresses\" in user and len(user[\"emailAddresses\"]) > 0:<br>        primary_email = user[\"emailAddresses\"][0][\"email\"]<br>        all_emails.append(primary_email)<br><br>print(f\"\u2705 Found {len(all_emails)} users across all domains\")<br><br># Confirm before sending<br>print(f\"\\n[3/4] Ready to send email:\")<br>print(f\"  Subject: {EMAIL_SUBJECT}\")<br>print(f\"  Recipients: {len(all_emails)} users\")<br>confirm = input(\"\\nProceed with sending? (yes/no): \")<br><br>if confirm.lower() != \"yes\":<br>    print(\"\u274c Cancelled by user\")<br>    exit(0)<br><br># Send email<br>print(\"\\n[4/4] Sending email to all users...\")<br><br># Prepare email message<br>email_params = {<br>    \"from\": ADMIN_USER,<br>    \"to\": all_emails,<br>    \"subject\": EMAIL_SUBJECT,<br>    \"text\": EMAIL_BODY<br>}<br><br>send_response = api_call(\"Messages.send\", email_params)<br><br>if \"error\" in send_response:<br>    print(f\"\u274c Failed to send email: {send_response['error']['message']}\")<br>    exit(1)<br><br>print(f\"\u2705 Email sent successfully to {len(all_emails)} users!\")<br><br># Logout<br>api_call(\"Session.logout\")<br>print(\"\\n\u2705 Done! All users have been notified.\")<br>```<br><br>### <strong>Step 3: Save and Exit</strong><br>- Press <strong>Ctrl + O</strong> to save<br>- Press <strong>Enter</strong> to confirm<br>- Press <strong>Ctrl + X</strong> to exit<br><br>### <strong>Step 4: Make the Script Executable</strong><br><br>```bash<br>chmod +x ~/send_kerio_announcement.py<br>```<br><br>### <strong>Step 5: Install Required Python Library</strong><br><br>```bash<br>pip3 install requests<br>```<br><br>If you don't have pip3, install it first:<br>```bash<br>curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py<br>python3 get-pip.py<br>```<br><br>### <strong>Step 6: Run the Script</strong><br><br>```bash<br>python3 ~/send_kerio_announcement.py<br>```<br><br><hr><br><br>## <strong>What the Script Does:</strong><br><br>1. \u2705 Prompts you for Kerio server address and admin credentials<br>2. \u2705 Logs into the Kerio Connect API<br>3. \u2705 Retrieves <strong>all users from all domains</strong> automatically<br>4. \u2705 Lets you compose your announcement (subject + body)<br>5. \u2705 Shows you a confirmation before sending<br>6. \u2705 Sends the email to all users<br>7. \u2705 Logs out and confirms completion<br><br><hr><br><br>## <strong>Usage Example:</strong><br><br>```<br>Enter Kerio Connect server address: mail.yourcompany.com<br>Enter admin username: admin@yourcompany.com<br>Enter admin password: <strong></strong><strong></strong><br><br>--- Compose Your Announcement ---<br>Email Subject: Scheduled Maintenance - Email Service Interruption<br>Email Body (press Enter, then Ctrl+D when done):<br>Dear Team,<br><br>We will be performing scheduled maintenance...<br>[Ctrl+D]<br><br>[1/4] Logging in to Kerio Connect API...<br>\u2705 Login successful!<br><br>[2/4] Retrieving all users from all domains...<br>\u2705 Found 300 users across all domains<br><br>[3/4] Ready to send email:<br>  Subject: Scheduled Maintenance - Email Service Interruption<br>  Recipients: 300 users<br><br>Proceed with sending? (yes/no): yes<br><br>[4/4] Sending email to all users...<br>\u2705 Email sent successfully to 300 users!<br><br>\u2705 Done! All users have been notified.<br>```<br><br><hr><br><br>## <strong>Important Notes:</strong><br><br>\u26a0\ufe0f <strong>SSL Certificate:</strong> The script disables SSL verification for simplicity. If you have a valid SSL certificate, you can change `session.verify = False` to `session.verify = True`<br><br>\u26a0\ufe0f <strong>API Port:</strong> The script uses port <strong>4040</strong> (default Kerio Admin API port). If you've changed this, update the `API_URL` line.<br><br>\u26a0\ufe0f <strong>Admin Credentials:</strong> Make sure you use an admin account with sufficient privileges.<br><br><hr><br><br>## <strong>For Future Use:</strong><br><br>You can save this script and reuse it anytime you need to send announcements to all users across all domains. You could even modify it to:<br>- Read the email body from a text file<br>- Send HTML emails instead of plain text<br>- Filter users by specific criteria<br><br><hr><br><br><strong>Try running the script and let me know if you encounter any issues!</strong> Once you've sent the maintenance notification, we can focus on the actual CalDAV rebuild process. \ud83d\ude80<br/><br><br><b>--- Customer (Thierry Almy) ---</b><br>how could I export all mail addresses via Commandline on Mac?<br/><br><br><b>--- AI Assistant ---</b><br>Great question! Here's how to export all email addresses via command line on macOS from your Kerio Connect server. \ud83d\udce7<br><br><hr><br><br>## <strong>Method 1: Extract from Kerio Configuration Files (Fastest)</strong><br><br>Kerio Connect stores user information in XML configuration files. Here's how to extract all email addresses:<br><br>### <strong>Step 1: Navigate to Kerio's Store Directory</strong><br><br>```bash<br>cd /usr/local/kerio/mailserver/store<br>```<br><br><strong>Note:</strong> The default path on macOS is `/usr/local/kerio/mailserver/store`. If you installed Kerio in a custom location, adjust accordingly.<br><br>### <strong>Step 2: Extract All Email Addresses</strong><br><br>```bash<br>sudo grep -r \"<loginName>\" . | grep -oE '[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}' | sort -u > ~/all_kerio_emails.txt<br>```<br><br>This will create a file called `all_kerio_emails.txt` in your home directory with all unique email addresses.<br><br>### <strong>Step 3: View the Results</strong><br><br>```bash<br>cat ~/all_kerio_emails.txt<br>```<br><br>Or open it in a text editor:<br>```bash<br>open ~/all_kerio_emails.txt<br>```<br><br><hr><br><br>## <strong>Method 2: More Precise XML Parsing</strong><br><br>If Method 1 doesn't capture everything correctly, use this more precise approach:<br><br>```bash<br>cd /usr/local/kerio/mailserver/store<br>sudo find . -name \"config.fld\" -exec grep -h \"<loginName>\" {} \\; | sed -n 's/.*<loginName>\\(.*\\)<\\/loginName>.*/\\1/p' | sort -u > ~/all_kerio_emails.txt<br>```<br><br>This specifically looks for the `<loginName>` XML tags in all user configuration files.<br><br><hr><br><br>## <strong>Method 3: Extract with Domain Information</strong><br><br>If you want to see which domain each user belongs to:<br><br>```bash<br>cd /usr/local/kerio/mailserver/store<br>sudo find . -type f -name \"config.fld\" | while read file; do<br>    domain=$(echo \"$file\" | cut -d'/' -f2)<br>    email=$(grep \"<loginName>\" \"$file\" | sed -n 's/.*<loginName>\\(.*\\)<\\/loginName>.*/\\1/p')<br>    if [ ! -z \"$email\" ]; then<br>        echo \"$domain,$email\"<br>    fi<br>done | sort > ~/kerio_emails_with_domains.csv<br>```<br><br>This creates a CSV file with format: `domain,email@address.com`<br><br><hr><br><br>## <strong>Method 4: Using Kerio's Database (If Available)</strong><br><br>If your Kerio Connect uses a database backend, you might be able to query it directly, but the file-based approach above is more universal.<br><br><hr><br><br>## <strong>Method 5: One-Liner for Quick Copy-Paste</strong><br><br>If you just need the emails quickly for BCC:<br><br>```bash<br>cd /usr/local/kerio/mailserver/store && sudo grep -rh \"<loginName>\" . | sed -n 's/.*<loginName>\\(.*\\)<\\/loginName>.*/\\1/p' | sort -u | tr '\\n' ', ' | pbcopy<br>```<br><br>This extracts all emails, removes duplicates, converts them to a comma-separated list, and <strong>copies directly to your clipboard</strong> - ready to paste into the BCC field!<br><br><hr><br><br>## <strong>Troubleshooting:</strong><br><br>### <strong>If you get \"Permission Denied\":</strong><br>Add `sudo` before the command:<br>```bash<br>sudo grep -r \"<loginName>\" . | grep -oE '[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}' | sort -u > ~/all_kerio_emails.txt<br>```<br><br>### <strong>If the path doesn't exist:</strong><br>Find where Kerio is installed:<br>```bash<br>sudo find / -name \"mailserver\" -type d 2>/dev/null<br>```<br><br>### <strong>To count how many emails were found:</strong><br>```bash<br>wc -l ~/all_kerio_emails.txt<br>```<br><br><hr><br><br>## <strong>Quick Comparison:</strong><br><br>| Method | Speed | Output | Best For |<br>|--------|-------|--------|----------|<br>| Method 1 | \u26a1 Fastest | Plain list | Quick export |<br>| Method 2 | \u26a1 Fast | Plain list | More accurate |<br>| Method 3 | \ud83d\udc22 Slower | CSV with domains | Analysis |<br>| Method 5 | \u26a1 Fastest | Clipboard | Immediate BCC use |<br><br><hr><br><br>## <strong>My Recommendation:</strong><br><br>Use <strong>Method 5</strong> (the one-liner with `pbcopy`) if you need to send the email <strong>right now</strong> - it copies all addresses directly to your clipboard in comma-separated format, ready to paste into BCC.<br><br>Use <strong>Method 2</strong> if you want a clean text file for future reference.<br><br><hr><br><br><strong>Try Method 5 first and let me know if it works!</strong> You should see a count of how many addresses were copied. Then you can immediately paste into your email client's BCC field. \ud83d\udccb<br/><br><br><b>--- Customer (Thierry Almy) ---</b><br>would the broadcast message not be easier to do with the mailing list function?<br/><br><br><b>--- AI Assistant ---</b><br><strong>Excellent point!</strong> \ud83c\udfaf You're absolutely right - I should have mentioned the <strong>Mailing List</strong> function much earlier! That's actually a much simpler built-in solution for this exact use case.<br><br><hr><br><br>## <strong>Using Kerio Connect Mailing Lists for Announcements</strong><br><br>### <strong>How It Works:</strong><br><br>Kerio Connect's <strong>Mailing List</strong> feature allows you to:<br>- \u2705 Create a list that accepts messages from authorized senders (like admins)<br>- \u2705 Automatically distribute to all subscribers<br>- \u2705 Manually add members from <strong>multiple domains</strong> (unlike groups)<br>- \u2705 Control who can post to the list<br><br><hr><br><br>## <strong>Setting Up an \"All Users\" Mailing List:</strong><br><br>### <strong>Step 1: Create the Mailing List</strong><br><br>1. Go to <strong>Accounts</strong> \u2192 <strong>Mailing Lists</strong><br>2. Click <strong>Add</strong><br>3. Configure:<br>   - <strong>Name:</strong> `announcements` or `all-users`<br>   - <strong>Domain:</strong> Choose your primary domain<br>   - <strong>Email:</strong> `announcements@yourprimarydomain.com`<br><br>### <strong>Step 2: Configure List Settings</strong><br><br>In the mailing list settings:<br><br><strong>General Tab:</strong><br>- <strong>Description:</strong> \"Company-wide announcements\"<br>- <strong>List type:</strong> Choose <strong>Announcement list</strong> (only authorized senders can post)<br><br><strong>Members Tab:</strong><br>- Click <strong>Add</strong> and start adding users<br>- <strong>Important:</strong> You CAN add users from different domains here!<br>- Add all 300 users across your 50+ domains<br><br><strong>Posting Tab:</strong><br>- <strong>Who can post:</strong> Select \"Only these users\"<br>- Add yourself and other admins who should be able to send announcements<br><br><hr><br><br>## <strong>The Challenge with 300 Users:</strong><br><br>The main issue is that adding 300 users manually through the UI is tedious. However, you have options:<br><br>### <strong>Option A: Bulk Import via CSV</strong><br><br>Some versions of Kerio Connect allow importing mailing list members:<br><br>1. Export your user list (using the command-line method I showed earlier)<br>2. Format it as needed<br>3. Import into the mailing list<br><br><strong>Check if your version supports this</strong> - look for an <strong>Import</strong> button in the Mailing List members section.<br><br><hr><br><br>### <strong>Option B: Direct Configuration File Edit</strong><br><br>You can manually edit the mailing list configuration file to add all members at once:<br><br>1. Create the mailing list in the UI first<br>2. Stop Kerio Connect service:<br>   ```bash<br>   sudo /usr/local/kerio/mailserver/kerio-mailserver stop<br>   ```<br><br>3. Navigate to the mailing list config:<br>   ```bash<br>   cd /usr/local/kerio/mailserver/store/[domain]/lists/announcements/<br>   ```<br><br>4. Edit the `config.fld` file and add all email addresses to the members section<br><br>5. Start Kerio Connect:<br>   ```bash<br>   sudo /usr/local/kerio/mailserver/kerio-mailserver start<br>   ```<br><br><strong>\u26a0\ufe0f Warning:</strong> This requires careful XML editing and backing up the file first.<br><br><hr><br><br>### <strong>Option C: Use API to Add Members</strong><br><br>You could use a script similar to the one I provided earlier, but instead of sending an email, it would:<br>1. Get all users via API<br>2. Add them all to the mailing list via API<br><br><hr><br><br>## <strong>For Your Immediate Need:</strong><br><br>Since you need to send the maintenance notification <strong>soon</strong>, here's what I'd recommend:<br><br><strong>For Right Now:</strong><br>- Use the <strong>command-line export + BCC method</strong> (Method 5 I showed earlier with `pbcopy`) to send this immediate announcement<br><br><strong>For Future Announcements:</strong><br>- Set up a <strong>Mailing List</strong> properly so next time you just email `announcements@yourdomain.com` and everyone gets it automatically<br><br><hr><br><br>## <strong>Quick Question:</strong><br><br><strong>What version of Kerio Connect are you running?</strong> <br><br>You can check with:<br>```bash<br>/usr/local/kerio/mailserver/kerio-mailserver --version<br>```<br><br>Some newer versions have better bulk import features for mailing lists that might make this much easier.<br><br><hr><br><br>You're absolutely right that mailing lists are the proper long-term solution here - I should have led with that! Do you want to:<br>1. <strong>Send the immediate announcement now</strong> (via BCC), then set up the mailing list for future use?<br>2. <strong>Take time to set up the mailing list first</strong>, then send through that?<br><br>Let me know and I'll guide you through whichever path you prefer! \ud83d\ude80<br/><br><br><b>--- Customer (Thierry Almy) ---</b><br>ok, the mailingliste function worked.<br/><br><br><b>--- AI Assistant ---</b><br>Awesome! \ud83c\udf89 I'm glad the mailing list function worked out for you! That's definitely the cleanest solution for company-wide announcements.<br><br>Now that your users have been notified about the maintenance, you have that mailing list set up for any future announcements too - much easier next time!<br><br><hr><br><br>## <strong>Back to Your Original Issue: CalDAV Rebuild</strong><br><br>Now let's get back to resolving your CalDAV synchronization problem. Just to recap where we were:<br><br>- You're experiencing CalDAV sync issues<br>- You want to perform a CalDAV rebuild to fix the problem<br>- You've now notified all users about the upcoming maintenance<br><br><hr><br><br>## <strong>Next Steps for CalDAV Rebuild:</strong><br><br>Before we proceed with the rebuild process, let me gather a bit more information to give you the most accurate guidance:<br><br>1. <strong>What version of Kerio Connect are you running?</strong><br>   ```bash<br>   /usr/local/kerio/mailserver/kerio-mailserver --version<br>   ```<br><br>2. <strong>What specific CalDAV issues are users experiencing?</strong><br>   - Calendar events not syncing?<br>   - Duplicate events?<br>   - Events disappearing?<br>   - Sync errors in specific clients (iOS, macOS Calendar, etc.)?<br><br>3. <strong>Is this affecting all users or just specific ones?</strong><br><br>4. <strong>Have you already backed up your Kerio Connect data?</strong> (This is crucial before any rebuild operation)<br><br><hr><br><br>Once I have this information, I can provide you with the exact steps for the CalDAV rebuild process specific to your version and situation.<br><br><strong>What version are you running, and what specific CalDAV symptoms are you seeing?</strong> \ud83d\udcc5<br/><br><br><b>--- Customer (Thierry Almy) ---</b><br>II posted the version already earlier<br/><br><br><b>--- AI Assistant ---</b><br>You're absolutely right - my apologies! I don't actually see the version information in our conversation history. Could you please share it again? <br><br>Sometimes details can get lost in the flow of conversation, and I want to make sure I give you the correct CalDAV rebuild instructions specific to your version.<br><br><strong>Could you tell me:</strong><br>1. <strong>What version of Kerio Connect are you running?</strong> (e.g., 9.4.2, 10.0.5, etc.)<br>2. <strong>What specific CalDAV issues are users experiencing?</strong> (sync failures, duplicates, missing events, etc.)<br><br>Once I have this info, I'll provide you with the exact rebuild procedure for your version! \ud83d\udccb<br/><br><br><b>--- Customer (Thierry Almy) ---</b><br>10.0.8 patch 1 (9228)<br/><br><br><b>--- AI Assistant ---</b><br>Perfect! Thank you for confirming - <strong>Kerio Connect 10.0.8 patch 1 (build 9228)</strong>. That's the latest patched version, which is great! \ud83d\udc4d<br><br><hr><br><br>## <strong>CalDAV Rebuild Process for Kerio Connect 10.0.8 p1</strong><br><br>Now, before we proceed with the rebuild, I need to understand the specific issue better:<br><br>### <strong>What CalDAV symptoms are you experiencing?</strong><br><br>- \ud83d\udcc5 Calendar events not syncing between devices?<br>- \ud83d\udd04 Duplicate calendar events appearing?<br>- \u274c Events disappearing or not showing up?<br>- \u26a0\ufe0f Sync errors in specific clients (iOS, macOS Calendar, Thunderbird, etc.)?<br>- \ud83d\udc0c Slow CalDAV performance?<br>- \ud83d\udd34 CalDAV service not responding at all?<br><br>### <strong>Is this affecting:</strong><br>- All users across all domains?<br>- Specific users only?<br>- Users on specific devices/clients?<br><br><hr><br><br>## <strong>Important Pre-Rebuild Checklist:</strong><br><br>Before we proceed with any CalDAV rebuild, we need to ensure:<br><br>1. \u2705 <strong>Full backup completed</strong> - Have you backed up your Kerio Connect data?<br>2. \u2705 <strong>Maintenance window scheduled</strong> - Users have been notified (which you've done!)<br>3. \u2705 <strong>Understanding of impact</strong> - CalDAV rebuild will require users to potentially re-sync their calendars<br><br><hr><br><br><strong>Please describe the specific CalDAV issue you're facing, and confirm you have a current backup, then I'll provide you with the exact rebuild procedure!</strong> \ud83d\udd27<br/><br><br><b>--- Customer (Thierry Almy) ---</b><br>CalDAV not responding at all<br/><br><br><b>--- AI Assistant ---</b><br>Got it - <strong>CalDAV service not responding at all</strong> is definitely a critical issue that needs immediate attention. \ud83d\udd34<br><br>Let me query the knowledge base for the most current troubleshooting steps and rebuild procedures for CalDAV issues in version 10.0.8 p1.<br/><br><br><b>--- AI Assistant ---</b><br>Perfect! I found the relevant information. Based on the knowledge base, when CalDAV is completely unresponsive, it's typically due to corrupted `.caldav.db` files in the Kerio store directory.<br><br><hr><br><br>## <strong>CalDAV Rebuild Procedure for Kerio Connect 10.0.8 p1</strong><br><br>Here's the step-by-step process to fix your unresponsive CalDAV service:<br><br>### <strong>\ud83d\udccb Prerequisites:</strong><br>- \u2705 <strong>Backup completed</strong> - Confirm you have a current backup<br>- \u2705 <strong>Users notified</strong> - Done! \u2713<br>- \u2705 <strong>Maintenance window</strong> - Ready to proceed<br><br><hr><br><br>### <strong>\ud83d\udd27 CalDAV Rebuild Steps:</strong><br><br><strong>1. Stop the Kerio Connect Service</strong><br><br>```bash<br># Linux<br>sudo /etc/init.d/kerio-connect stop<br># or<br>sudo systemctl stop kerio-connect<br>```<br><br><strong>2. Navigate to the Kerio Store Directory</strong><br><br>```bash<br># Default Linux path<br>cd /opt/kerio/mailserver/store/mail/<br>```<br><br><strong>3. Backup the CalDAV Database Files</strong><br><br><strong>NOTE:</strong> These files are hidden (start with a dot), so you may need to use `ls -la` to see them.<br><br>```bash<br># Create a backup directory<br>mkdir -p /tmp/caldav_backup<br><br># Backup the CalDAV database files<br>cp .caldav.db /tmp/caldav_backup/<br>cp .caldav.db.bak /tmp/caldav_backup/<br>cp .carddav.db /tmp/caldav_backup/<br>cp .carddav.db.bak /tmp/caldav_backup/<br>```<br><br><strong>4. Delete the CalDAV Database Files</strong><br><br>```bash<br># Remove the corrupted CalDAV files<br>rm .caldav.db<br>rm .caldav.db.bak<br>rm .carddav.db<br>rm .carddav.db.bak<br>```<br><br><strong>5. Start the Kerio Connect Service</strong><br><br>```bash<br># Linux<br>sudo /etc/init.d/kerio-connect start<br># or<br>sudo systemctl start kerio-connect<br>```<br><br><strong>6. Verify Service is Running</strong><br><br>```bash<br># Check service status<br>sudo systemctl status kerio-connect<br><br># Check if CalDAV is responding<br>tail -f /opt/kerio/mailserver/logs/mailserver.log<br>```<br><br><hr><br><br>### <strong>\ud83d\udcf1 What Happens Next:</strong><br><br>- Kerio Connect will <strong>automatically rebuild</strong> the `.caldav.db` and `.carddav.db` files when the service starts<br>- Users may need to <strong>re-sync their calendar clients</strong> (remove and re-add the CalDAV account)<br>- Calendar data stored in Kerio Connect will remain intact - it's just the CalDAV sync database being rebuilt<br><br><hr><br><br>### <strong>\u26a0\ufe0f Important Notes:</strong><br><br>- The same procedure applies to <strong>CardDAV</strong> (contacts) issues<br>- If you have <strong>antivirus software</strong>, make sure Kerio Connect folders are excluded from scanning to prevent future corruption (see <a href=\"https://support.kerioconnect.gfi.com/article/113572\" target=\"_blank\">Antivirus Exclusions for Kerio Connect</a>)<br><br><hr><br><br><strong>Do you have a current backup and are you ready to proceed with these steps?</strong> Once you start, let me know how it goes, and I'll help you verify everything is working correctly! \ud83d\ude80<br/>"
        ]
      ],
      "diagnostics": {
        "kayako": {
          "requester_ok": true,
          "ticket_ok": true,
          "ticket_has_custom_fields": true,
          "ticket_translog_items": 1,
          "side_conversation_items": 0
        },
        "jira": {
          "link_present": false,
          "link_value": ""
        },
        "github": {
          "link_present": false,
          "link_value": ""
        }
      }
    },
    "similar_tickets": []
  }
}